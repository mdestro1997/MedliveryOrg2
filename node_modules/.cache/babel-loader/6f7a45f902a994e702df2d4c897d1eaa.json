{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mathubabocra.org.bw/Downloads/MedliveryMasterUpdated-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mathubabocra.org.bw/Downloads/MedliveryMasterUpdated-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';//import { request } from 'http';\nimport{SuccessfulApplication,ErrorApplication}from'./typeAuth';export function applyFormActionCreator(_x,_x2){return _applyFormActionCreator.apply(this,arguments);}function _applyFormActionCreator(){_applyFormActionCreator=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,cb){var token,uploadConfig,formData,request;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=localStorage.getItem('token');console.log('wE ARE HERE ',values);console.log('wE ARE HERE ',token);// const formData = new FormData();\n// formData.append('copyOfMedicalHistory', values.copyOfMedicalHistory);\naxios.defaults.headers={//data: values,\nAccept:'application/json','Content-Type':'multipart/form-data',Authorization:\"Bearer \".concat(token)};_context.next=6;return axios.get('https://glacial-wave-31511.herokuapp.com/api/uploads');case 6:uploadConfig=_context.sent;// const resizedUpload = await axios.post('http://localhost:5000/api/resizeUploads',formData);\n// console.log('resized img', resizedUpload.data)\ndelete axios.defaults.headers['Authorization'];console.log('moving on!!');_context.next=11;return axios.put(uploadConfig.data.url,values.copyOfMedicalHistory,{headers:{'Content-Type':values.copyOfMedicalHistory.type}});case 11:axios.defaults.headers={//data: values,\nAccept:'application/json','Content-Type':'multipart/form-data',Authorization:\"Bearer \".concat(token)};delete values.token;//const contactUpload = values.contactUpload\nformData=new FormData();console.log('fomrdatapa ',values.copyOfMedicalHistory);formData.append('copyOfMedicalHistory',values.copyOfMedicalHistory);console.log('fomrdatar ',formData);console.log('fomrdatapareeerrr ',JSON.stringify(values));// delete values.copyOfMedicalHistory;\nformData.append('value',JSON.stringify(values));//console.log('fomrdata ',formData)\n// const obj = {values,formData};\nformData.append('value',values);formData.append('imageUrl',uploadConfig.data.key);_context.prev=21;console.log('SignUp Action Creator ',formData);// delete formData.token;\n_context.next=25;return axios.post('http://localhost:5000/applyMedForm',formData);case 25:request=_context.sent;cb();return _context.abrupt(\"return\",{type:SuccessfulApplication,payload:request.data});case 30:_context.prev=30;_context.t0=_context[\"catch\"](21);return _context.abrupt(\"return\",{type:ErrorApplication,payload:'Oops! Something Went Wrong'});case 33:case\"end\":return _context.stop();}}},_callee,null,[[21,30]]);}));return _applyFormActionCreator.apply(this,arguments);}","map":{"version":3,"sources":["/Users/mathubabocra.org.bw/Downloads/MedliveryMasterUpdated-main/src/actions/applyFormActionCreator.js"],"names":["axios","SuccessfulApplication","ErrorApplication","applyFormActionCreator","values","cb","token","localStorage","getItem","console","log","defaults","headers","Accept","Authorization","get","uploadConfig","put","data","url","copyOfMedicalHistory","type","formData","FormData","append","JSON","stringify","key","post","request","payload"],"mappings":"2WAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA;AACA,OAASC,qBAAT,CAA+BC,gBAA/B,KAAuD,YAAvD,CAEA,eAAsBC,CAAAA,sBAAtB,+D,mHAAO,iBAAsCC,MAAtC,CAA8CC,EAA9C,0JACCC,KADD,CACSC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADT,CAELC,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA2BN,MAA3B,EACAK,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA2BJ,KAA3B,EAEA;AACA;AAEAN,KAAK,CAACW,QAAN,CAAeC,OAAf,CAAyB,CACvB;AAEAC,MAAM,CAAE,kBAHe,CAIvB,eAAgB,qBAJO,CAKvBC,aAAa,kBAAYR,KAAZ,CALU,CAAzB,CARK,sBAgBsBN,CAAAA,KAAK,CAACe,GAAN,CAAU,sDAAV,CAhBtB,QAgBCC,YAhBD,eAiBL;AACA;AACA,MAAOhB,CAAAA,KAAK,CAACW,QAAN,CAAeC,OAAf,CAAuB,eAAvB,CAAP,CACFH,OAAO,CAACC,GAAR,CAAY,aAAZ,EApBO,uBAqBCV,CAAAA,KAAK,CAACiB,GAAN,CAAUD,YAAY,CAACE,IAAb,CAAkBC,GAA5B,CAAiCf,MAAM,CAACgB,oBAAxC,CAA8D,CAClER,OAAO,CAAE,CACP,eAAgBR,MAAM,CAACgB,oBAAP,CAA4BC,IADrC,CADyD,CAA9D,CArBD,SA2BLrB,KAAK,CAACW,QAAN,CAAeC,OAAf,CAAyB,CACzB;AAEAC,MAAM,CAAE,kBAHiB,CAIzB,eAAgB,qBAJS,CAKzBC,aAAa,kBAAYR,KAAZ,CALY,CAAzB,CAOA,MAAOF,CAAAA,MAAM,CAACE,KAAd,CACA;AACMgB,QApCD,CAoCY,GAAIC,CAAAA,QAAJ,EApCZ,CAqCLd,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2BN,MAAM,CAACgB,oBAAlC,EAEAE,QAAQ,CAACE,MAAT,CAAgB,sBAAhB,CAAwCpB,MAAM,CAACgB,oBAA/C,EACAX,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BY,QAA1B,EACAb,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAkCe,IAAI,CAACC,SAAL,CAAetB,MAAf,CAAlC,EACA;AAEAkB,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBC,IAAI,CAACC,SAAL,CAAetB,MAAf,CAAzB,EACA;AACA;AAEAkB,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBpB,MAAzB,EACAkB,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA2BR,YAAY,CAACE,IAAb,CAAkBS,GAA7C,EAjDK,iBAmDHlB,OAAO,CAACC,GAAR,CAAY,wBAAZ,CAAsCY,QAAtC,EACA;AApDG,uBAqDmBtB,CAAAA,KAAK,CAAC4B,IAAN,CACpB,oCADoB,CAEpBN,QAFoB,CArDnB,SAqDGO,OArDH,eAyDHxB,EAAE,GAzDC,gCA0DI,CACLgB,IAAI,CAAEpB,qBADD,CAEL6B,OAAO,CAAED,OAAO,CAACX,IAFZ,CA1DJ,6FA+DI,CACLG,IAAI,CAAEnB,gBADD,CAEL4B,OAAO,CAAE,4BAFJ,CA/DJ,wE","sourcesContent":["import axios from 'axios';\r\n//import { request } from 'http';\r\nimport { SuccessfulApplication,ErrorApplication } from './typeAuth';\r\n\r\nexport async function applyFormActionCreator(values, cb) {\r\n  const token = localStorage.getItem('token');\r\n  console.log('wE ARE HERE ',values)\r\n  console.log('wE ARE HERE ',token)\r\n\r\n  // const formData = new FormData();\r\n  // formData.append('copyOfMedicalHistory', values.copyOfMedicalHistory);\r\n\r\n  axios.defaults.headers = {\r\n    //data: values,\r\n\r\n    Accept: 'application/json',\r\n    'Content-Type': 'multipart/form-data',\r\n    Authorization: `Bearer ${token}`,\r\n  };\r\n\r\n  const uploadConfig = await axios.get('https://glacial-wave-31511.herokuapp.com/api/uploads');\r\n  // const resizedUpload = await axios.post('http://localhost:5000/api/resizeUploads',formData);\r\n  // console.log('resized img', resizedUpload.data)\r\n  delete axios.defaults.headers['Authorization'];\r\nconsole.log('moving on!!')\r\n  await axios.put(uploadConfig.data.url, values.copyOfMedicalHistory, {\r\n    headers: {\r\n      'Content-Type': values.copyOfMedicalHistory.type,\r\n    },\r\n  });\r\n\r\n  axios.defaults.headers = {\r\n  //data: values,\r\n\r\n  Accept: 'application/json',\r\n  'Content-Type': 'multipart/form-data',\r\n  Authorization: `Bearer ${token}`,\r\n};\r\n  delete values.token;\r\n  //const contactUpload = values.contactUpload\r\n  const formData = new FormData();\r\n  console.log('fomrdatapa ', values.copyOfMedicalHistory);\r\n\r\n  formData.append('copyOfMedicalHistory', values.copyOfMedicalHistory);\r\n  console.log('fomrdatar ', formData);\r\n  console.log('fomrdatapareeerrr ', JSON.stringify(values));\r\n  // delete values.copyOfMedicalHistory;\r\n\r\n  formData.append('value', JSON.stringify(values));\r\n  //console.log('fomrdata ',formData)\r\n  // const obj = {values,formData};\r\n\r\n  formData.append('value', values);\r\n  formData.append('imageUrl',uploadConfig.data.key)\r\n  try {\r\n    console.log('SignUp Action Creator ', formData);\r\n    // delete formData.token;\r\n    const request = await axios.post(\r\n      'http://localhost:5000/applyMedForm',\r\n      formData\r\n    );\r\n    cb();\r\n    return {\r\n      type: SuccessfulApplication,\r\n      payload: request.data,\r\n    };\r\n  } catch (e) {\r\n    return {\r\n      type: ErrorApplication,\r\n      payload: 'Oops! Something Went Wrong',\r\n    };\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}