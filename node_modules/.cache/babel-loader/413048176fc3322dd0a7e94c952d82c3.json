{"ast":null,"code":"import _classCallCheck from\"/Users/mathubabocra.org.bw/Downloads/MedliveryMasterUpdated-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mathubabocra.org.bw/Downloads/MedliveryMasterUpdated-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/mathubabocra.org.bw/Downloads/MedliveryMasterUpdated-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mathubabocra.org.bw/Downloads/MedliveryMasterUpdated-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Card,Image,Figure,Jumbotron}from'react-bootstrap';import Abi from'../img/Abi.jpg';import Raphael from'../img/destro.jpg';import Pitso from'../img/mmopiemang.jpg';import io from'socket.io-client';var OnlineConsultation=/*#__PURE__*/function(_Component){_inherits(OnlineConsultation,_Component);var _super=_createSuper(OnlineConsultation);function OnlineConsultation(props){var _this;_classCallCheck(this,OnlineConsultation);_this=_super.call(this,props);_this.sendToPeer=function(messageType,payload){_this.socket.emit(messageType,{socketID:_this.socket.id,payload:payload});};_this.createOffer=function(){console.log('Offer');_this.pc.createOffer({offerToReceiveVideo:1}).then(function(sdp){// console.log(JSON.stringify(sdp))\n_this.pc.setLocalDescription(sdp);_this.sendToPeer('offerOrAnswer',sdp);});};_this.setRemoteDescription=function(){console.log('setting remote desc');var desc=JSON.parse(_this.textref.value);_this.pc.setRemoteDescription(new RTCSessionDescription(desc));};_this.createAnswer=function(){console.log('Answer');_this.pc.createAnswer({offerToReceiveVideo:1}).then(function(sdp){_this.pc.setLocalDescription(sdp);_this.sendToPeer('offerOrAnswer',sdp);// console.log(JSON.stringify(sdp))\n});};_this.addCandidate=function(){// const candidate = JSON.parse(this.textref.value)\n// console.log('Adding Candidate:', candidate)\n// this.pc.addIceCandidate(new RTCIceCandidate(candidate))\n//retrieve and parse the Candidate copied from the remote peer\nconsole.log('adding candidates');console.log(_this.candidates);_this.candidates.forEach(function(candidate){console.log(JSON.stringify(candidate));//add the candidate to the peer connection\n_this.pc.addIceCandidate(new RTCIceCandidate(candidate));});};_this.localVideoref=React.createRef();_this.remoteVideoref=React.createRef();_this.socket=null;_this.candidates=[];return _this;}_createClass(OnlineConsultation,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.socket=io('/webrtcPeerDestro',{path:'/webrtc',query:{}});this.socket.on('connection-success',function(success){console.log(success);});this.socket.on('offerOrAnswer',function(sdp){_this2.textref.value=JSON.stringify(sdp);_this2.pc.setRemoteDescription(new RTCSessionDescription(sdp));});this.socket.on('candidate',function(candidate){// this.textref.value = JSON.stringify(sdp)\n// console.log('socket candidate ', candidate)\n// this.candidates = [...this.candidates, candidate];\n_this2.pc.addIceCandidate(new RTCIceCandidate(candidate));});// const pc_config = null;\nvar pc_config={// iceServers: [\n//   // {\n//   //   urls: 'stun:[STUN_IP]:[PORT]',\n//   //   'credentials': '[YOR CREDENTIALS]',\n//   //   'username': '[USERNAME]'\n//   // },\n//   {\n//     url: 'stun:stun.l.google.com:19302',\n//   },\n//   {\n//     url: 'turn:numb.viagenie.ca',\n//     username: 'mathubaraphael@gmail.com',\n//     credential: 'B@k@ng_0397',\n//   },\n// ],\niceServers:[{urls:['stun:us-turn10.xirsys.com']},{username:'FqA4SeW0UjpOu25PEe06lN6NvAbsrejriEP-w0sJA88PlH1P7gAbTHa6vEYH-n2DAAAAAF-VhHNSYXBo',credential:'1ebe9d58-16ca-11eb-83b5-0242ac140004',urls:['turn:us-turn10.xirsys.com:80?transport=udp','turn:us-turn10.xirsys.com:3478?transport=udp','turn:us-turn10.xirsys.com:80?transport=tcp','turn:us-turn10.xirsys.com:3478?transport=tcp','turns:us-turn10.xirsys.com:443?transport=tcp','turns:us-turn10.xirsys.com:5349?transport=tcp']}]};this.pc=new RTCPeerConnection(pc_config);this.pc.onicecandidate=function(e){if(e.candidate){console.log('oniceCandidate ',e.candidate);// console.log(JSON.stringify(e.candidate))\n// const adCandidate = JSON.stringify(e.candidate)\n// this.candidates = [...this.candidates, e.candidate];\n_this2.sendToPeer('candidate,',e.candidate);}};this.pc.oniceconnectionstatechange=function(e){console.log(e);};this.pc.ontrack=function(e){_this2.remoteVideoref.current.srcObject=e.streams[0];};var constraints={audio:true,video:{width:1280,height:720}};var success=function success(stream){window.localStream=stream;_this2.localVideoref.current.srcObject=stream;_this2.pc.addStream(stream);};var failure=function failure(e){console.log('getUSERMEDIA Error: ',e);};navigator.mediaDevices.getUserMedia(constraints).then(success).catch(failure);// var constraints = { audio: true, video: { width: 1280, height: 720 } };\n// navigator.mediaDevices.getUserMedia(constraints)\n// .then(function(mediaStream) {\n//   var video = document.querySelector('video');\n//   video.srcObject = mediaStream;\n//   video.onloadedmetadata = function(e) {\n//     video.play();\n//   };\n// })\n// .catch(function(err) { console.log(err.name + \": \" + err.message); }); // always check for errors at the end.\n// Prefer camera resolution nearest to 1280x720.\n// always check for errors at the end.\n}// async function getMedia(constraints) {\n//   let stream = null;\n//   try {\n//     stream = await navigator.mediaDevices.getUserMedia(constraints);\n//     /* use the stream */\n//   } catch(err) {\n//     /* handle the error */\n//   }\n// }\n},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"video\",{style:{width:340,height:340,background:'black'},className:\"mt-5 mr-5 ml-5\",ref:this.localVideoref,autoPlay:true}),/*#__PURE__*/React.createElement(\"video\",{style:{width:340,height:340,background:'black'},ref:this.remoteVideoref,autoPlay:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5 mr-5 ml-5\"},/*#__PURE__*/React.createElement(\"button\",{onClick:this.createOffer},\"Offer\"),/*#__PURE__*/React.createElement(\"button\",{onClick:this.createAnswer},\"Answer\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"textarea\",{ref:function ref(_ref){_this3.textref=_ref;}})));}}]);return OnlineConsultation;}(Component);export default OnlineConsultation;","map":{"version":3,"sources":["/Users/mathubabocra.org.bw/Downloads/MedliveryMasterUpdated-main/src/Components/onlineConsultation.js"],"names":["React","Component","Card","Image","Figure","Jumbotron","Abi","Raphael","Pitso","io","OnlineConsultation","props","sendToPeer","messageType","payload","socket","emit","socketID","id","createOffer","console","log","pc","offerToReceiveVideo","then","sdp","setLocalDescription","setRemoteDescription","desc","JSON","parse","textref","value","RTCSessionDescription","createAnswer","addCandidate","candidates","forEach","candidate","stringify","addIceCandidate","RTCIceCandidate","localVideoref","createRef","remoteVideoref","path","query","on","success","pc_config","iceServers","urls","username","credential","RTCPeerConnection","onicecandidate","e","oniceconnectionstatechange","ontrack","current","srcObject","streams","constraints","audio","video","width","height","stream","window","localStream","addStream","failure","navigator","mediaDevices","getUserMedia","catch","background","ref"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Card, Image, Figure, Jumbotron } from 'react-bootstrap';\r\nimport Abi from '../img/Abi.jpg';\r\nimport Raphael from '../img/destro.jpg';\r\nimport Pitso from '../img/mmopiemang.jpg';\r\nimport io from 'socket.io-client';\r\n\r\nclass OnlineConsultation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.localVideoref = React.createRef();\r\n    this.remoteVideoref = React.createRef();\r\n    this.socket = null;\r\n    this.candidates = [];\r\n  }\r\n       \r\n  componentDidMount() {\r\n    this.socket = io('/webrtcPeerDestro', {\r\n      path: '/webrtc',\r\n      query: {},\r\n    });\r\n\r\n    this.socket.on('connection-success', (success) => {\r\n      console.log(success);\r\n    });\r\n\r\n    this.socket.on('offerOrAnswer', (sdp) => {\r\n      this.textref.value = JSON.stringify(sdp);\r\n\r\n      this.pc.setRemoteDescription(new RTCSessionDescription(sdp));\r\n    });\r\n\r\n    this.socket.on('candidate', (candidate) => {\r\n      // this.textref.value = JSON.stringify(sdp)\r\n      // console.log('socket candidate ', candidate)\r\n      // this.candidates = [...this.candidates, candidate];\r\n      this.pc.addIceCandidate(new RTCIceCandidate(candidate));\r\n    });\r\n\r\n    // const pc_config = null;\r\n\r\n    const pc_config = {\r\n      // iceServers: [\r\n      //   // {\r\n      //   //   urls: 'stun:[STUN_IP]:[PORT]',\r\n      //   //   'credentials': '[YOR CREDENTIALS]',\r\n      //   //   'username': '[USERNAME]'\r\n      //   // },\r\n      //   {\r\n      //     url: 'stun:stun.l.google.com:19302',\r\n      //   },\r\n      //   {\r\n      //     url: 'turn:numb.viagenie.ca',\r\n      //     username: 'mathubaraphael@gmail.com',\r\n      //     credential: 'B@k@ng_0397',\r\n      //   },\r\n      // ],\r\n      iceServers: [\r\n        { urls: ['stun:us-turn10.xirsys.com'] },\r\n        {\r\n          username:\r\n            'FqA4SeW0UjpOu25PEe06lN6NvAbsrejriEP-w0sJA88PlH1P7gAbTHa6vEYH-n2DAAAAAF-VhHNSYXBo',\r\n          credential: '1ebe9d58-16ca-11eb-83b5-0242ac140004',\r\n          urls: [\r\n            'turn:us-turn10.xirsys.com:80?transport=udp',\r\n            'turn:us-turn10.xirsys.com:3478?transport=udp',\r\n            'turn:us-turn10.xirsys.com:80?transport=tcp',\r\n            'turn:us-turn10.xirsys.com:3478?transport=tcp',\r\n            'turns:us-turn10.xirsys.com:443?transport=tcp',\r\n            'turns:us-turn10.xirsys.com:5349?transport=tcp',\r\n          ],\r\n        },\r\n      ],\r\n    };\r\n\r\n    this.pc = new RTCPeerConnection(pc_config);\r\n\r\n    this.pc.onicecandidate = (e) => {\r\n      if (e.candidate) {\r\n        console.log('oniceCandidate ', e.candidate);\r\n\r\n        // console.log(JSON.stringify(e.candidate))\r\n        // const adCandidate = JSON.stringify(e.candidate)\r\n        // this.candidates = [...this.candidates, e.candidate];\r\n\r\n        this.sendToPeer('candidate,', e.candidate);\r\n      }\r\n    };\r\n\r\n    this.pc.oniceconnectionstatechange = (e) => {\r\n      console.log(e);\r\n    };\r\n\r\n    this.pc.ontrack = (e) => {\r\n      this.remoteVideoref.current.srcObject = e.streams[0];\r\n    };\r\n\r\n    var constraints = { audio: true, video: { width: 1280, height: 720 } };\r\n\r\n    const success = (stream) => {\r\n      window.localStream = stream;\r\n      this.localVideoref.current.srcObject = stream;\r\n      this.pc.addStream(stream);\r\n    };  \r\n    const failure = (e) => {\r\n      console.log('getUSERMEDIA Error: ', e);\r\n    }; \r\n\r\n    navigator.mediaDevices\r\n      .getUserMedia(constraints)\r\n      .then(success)\r\n      .catch(failure);\r\n\r\n    // var constraints = { audio: true, video: { width: 1280, height: 720 } };\r\n    // navigator.mediaDevices.getUserMedia(constraints)\r\n    // .then(function(mediaStream) {\r\n    //   var video = document.querySelector('video');\r\n    //   video.srcObject = mediaStream;\r\n    //   video.onloadedmetadata = function(e) {\r\n    //     video.play();\r\n    //   };\r\n    // })\r\n    // .catch(function(err) { console.log(err.name + \": \" + err.message); }); // always check for errors at the end.\r\n    // Prefer camera resolution nearest to 1280x720.\r\n    // always check for errors at the end.\r\n  }\r\n\r\n  // async function getMedia(constraints) {\r\n  //   let stream = null;\r\n\r\n  //   try {\r\n  //     stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n  //     /* use the stream */\r\n  //   } catch(err) {\r\n  //     /* handle the error */\r\n  //   }\r\n  // }\r\n\r\n  sendToPeer = (messageType, payload) => {\r\n    this.socket.emit(messageType, {\r\n      socketID: this.socket.id,\r\n      payload,\r\n    });\r\n  };\r\n\r\n  createOffer = () => {\r\n    console.log('Offer');\r\n    this.pc.createOffer({ offerToReceiveVideo: 1 }).then((sdp) => {\r\n      // console.log(JSON.stringify(sdp))\r\n      this.pc.setLocalDescription(sdp);\r\n      this.sendToPeer('offerOrAnswer', sdp);\r\n    });\r\n  };\r\n\r\n  setRemoteDescription = () => {\r\n    console.log('setting remote desc');\r\n    const desc = JSON.parse(this.textref.value);\r\n    this.pc.setRemoteDescription(new RTCSessionDescription(desc));\r\n  };\r\n\r\n  createAnswer = () => {\r\n    console.log('Answer');\r\n    this.pc.createAnswer({ offerToReceiveVideo: 1 }).then((sdp) => {\r\n      this.pc.setLocalDescription(sdp);\r\n\r\n      this.sendToPeer('offerOrAnswer', sdp);\r\n\r\n      // console.log(JSON.stringify(sdp))\r\n    });\r\n  };\r\n\r\n  addCandidate = () => {\r\n    // const candidate = JSON.parse(this.textref.value)\r\n    // console.log('Adding Candidate:', candidate)\r\n    // this.pc.addIceCandidate(new RTCIceCandidate(candidate))\r\n\r\n    //retrieve and parse the Candidate copied from the remote peer\r\n    console.log('adding candidates');\r\n    console.log(this.candidates);\r\n\r\n    this.candidates.forEach((candidate) => {\r\n      console.log(JSON.stringify(candidate));\r\n      //add the candidate to the peer connection\r\n      this.pc.addIceCandidate(new RTCIceCandidate(candidate));\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <video\r\n          style={{ width: 340, height: 340, background: 'black' }}\r\n          className='mt-5 mr-5 ml-5'\r\n          ref={this.localVideoref}\r\n          autoPlay\r\n        ></video>\r\n\r\n        <video\r\n          style={{ width: 340, height: 340, background: 'black' }}\r\n          ref={this.remoteVideoref}\r\n          autoPlay\r\n        ></video>\r\n\r\n        <div className='mt-5 mr-5 ml-5'>\r\n          <button onClick={this.createOffer}>Offer</button>\r\n          <button onClick={this.createAnswer}>Answer</button>\r\n          <br />\r\n          <textarea\r\n            ref={(ref) => {\r\n              this.textref = ref;\r\n            }}\r\n          />\r\n          {/* <br />\r\n          <button onClick={this.setRemoteDescription}>Set Remote Desc</button>\r\n          <button onClick={this.addCandidate}>Add Candidate</button> */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OnlineConsultation;\r\n"]},"metadata":{},"sourceType":"module"}